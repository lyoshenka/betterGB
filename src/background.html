<html>
<script>

getOptions = function() {
  var _options = {
    'close_on_esc': true,
    'submit_on_enter': true,

    'hide_top_bar': true,
    'hide_cancel_button': true,
    'hide_all_bookmarks_button': true,
    'hide_bottom_links': false
  };

  for (var option in _options) {
    if (localStorage.getItem(option) !== null) {
      console.log(localStorage[option]);
      _options[option] = localStorage[option] === 'true' ? true : (localStorage[option] === 'false' ? false : localStorage[option]);
    }
  }

  return _options;
};


chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
  if (request.method == "getOptions")
    sendResponse({"options": getOptions()});
  else
    sendResponse({});
});

</script>
</html>
